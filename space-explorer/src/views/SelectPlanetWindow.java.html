<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>SelectPlanetWindow.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">space-explorer (23/05/2019 9:13:26 PM)</a> &gt; <a href="../../index.html" class="el_group">space-explorer</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">views</a> &gt; <span class="el_source">SelectPlanetWindow.java</span></div><h1>SelectPlanetWindow.java</h1><pre class="source lang-java linenums">package views;

import java.awt.Font;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultListModel;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.SwingConstants;
import javax.swing.UIManager;
import javax.swing.border.TitledBorder;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

import main.CrewMember;
import main.GameEnvironment;
import main.Planet;

/**
 * The window that allows the player to select a new planet to pilot to.
 * @author Yu Duan
 * @author Joyce Cheah
 */
public class SelectPlanetWindow {

	private JFrame frame;
	private GameEnvironment game;
	private CrewMember pilot1;
	private CrewMember pilot2;

	/**
	 * Creates the window application.
	 * 
	 * @param incomingGame A GameEnvironment containing all the contents of the
	 *                     game.
	 */
<span class="nc" id="L45">	public SelectPlanetWindow(GameEnvironment incomingGame) {</span>
<span class="nc" id="L46">		game = incomingGame;</span>
<span class="nc" id="L47">		initialize();</span>
<span class="nc" id="L48">		frame.setVisible(true);</span>
<span class="nc" id="L49">	}</span>

	/**
	 * Closes the window.
	 */
	public void closeWindow() {
<span class="nc" id="L55">		frame.dispose();</span>
<span class="nc" id="L56">	}</span>

	/**
	 * Calls the close window method in game environment.
	 */
	public void finishedWindow() {
<span class="nc" id="L62">		game.closeSelectPlanetWindow(this);</span>
<span class="nc" id="L63">	}</span>

	/**
	 * Initializes the contents of the frame. This includes a list of planets available to choose from, and a panel that displays if any engine pieces are detected on the selected planet, and buttons to pilot or return to the actions window.
	 */
	private void initialize() {
<span class="nc" id="L69">		frame = new JFrame();</span>
<span class="nc" id="L70">		frame.setResizable(false);</span>
<span class="nc" id="L71">		frame.setBounds(100, 100, 800, 600);</span>
<span class="nc" id="L72">		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L73">		frame.getContentPane().setLayout(null);</span>
		
		// Getting the chosen pilots 
<span class="nc" id="L76">		pilot1 = game.getChosenCrewMember();</span>
<span class="nc" id="L77">		pilot2 = game.getOtherChosenCrewMember();</span>

		// Create a DefaultListModel and add all the planets to it.
<span class="nc" id="L80">		DefaultListModel&lt;Planet&gt; planets = new DefaultListModel();</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">		for (Planet planet : game.getPlanets()) {</span>
<span class="nc" id="L82">			planets.addElement(planet);</span>
		}

<span class="nc" id="L85">		JButton btnPilot = new JButton(&quot;PILOT&quot;);</span>

<span class="nc" id="L87">		btnPilot.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 16));</span>
<span class="nc" id="L88">		btnPilot.setEnabled(false);</span>
<span class="nc" id="L89">		btnPilot.setBounds(622, 514, 122, 25);</span>
<span class="nc" id="L90">		frame.getContentPane().add(btnPilot);</span>
		
<span class="nc" id="L92">		JPanel panelEnginePiece = new JPanel();</span>
<span class="nc" id="L93">		panelEnginePiece.setBorder(new TitledBorder(null, &quot;&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, null));</span>
<span class="nc" id="L94">		panelEnginePiece.setBounds(419, 433, 325, 53);</span>
<span class="nc" id="L95">		frame.getContentPane().add(panelEnginePiece);</span>
<span class="nc" id="L96">		panelEnginePiece.setLayout(null);</span>
		
<span class="nc" id="L98">		JLabel lblEnginePieceAvailable = new JLabel(&quot;Part detected:&quot;);</span>
<span class="nc" id="L99">		lblEnginePieceAvailable.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 16));</span>
<span class="nc" id="L100">		lblEnginePieceAvailable.setBounds(12, 13, 186, 22);</span>
<span class="nc" id="L101">		panelEnginePiece.add(lblEnginePieceAvailable);</span>
		
<span class="nc" id="L103">		JLabel lblPieceAvailableValue = new JLabel(game.getCrew().getCurrentLocation().planetPieceDetected());</span>
<span class="nc" id="L104">		lblPieceAvailableValue.setFont(new Font(&quot;Dialog&quot;, Font.PLAIN, 16));</span>
		
<span class="nc" id="L106">		lblPieceAvailableValue.setBounds(210, 13, 103, 22);</span>
<span class="nc" id="L107">		panelEnginePiece.add(lblPieceAvailableValue);</span>
		
<span class="nc" id="L109">		JLabel lblPlanetImage = new JLabel();</span>
<span class="nc" id="L110">		lblPlanetImage.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L111">		lblPlanetImage.setBounds(419, 87, 325, 285);</span>
		
<span class="nc" id="L113">		JPanel panelSelectPlanet = new JPanel();</span>
<span class="nc" id="L114">		panelSelectPlanet.setBorder(new TitledBorder(null, &quot;&quot;, TitledBorder.LEADING, TitledBorder.TOP, null, null));</span>
<span class="nc" id="L115">		panelSelectPlanet.setBounds(50, 87, 325, 398);</span>
<span class="nc" id="L116">		frame.getContentPane().add(panelSelectPlanet);</span>
<span class="nc" id="L117">		panelSelectPlanet.setLayout(null);</span>
<span class="nc" id="L118">		JList listPlanets = new JList(planets);</span>
<span class="nc" id="L119">		listPlanets.setSelectedValue(game.getCrew().getCurrentLocation(), true);</span>
<span class="nc" id="L120">		listPlanets.setBorder(null);</span>
<span class="nc" id="L121">		listPlanets.addListSelectionListener(new ListSelectionListener() {</span>
			public void valueChanged(ListSelectionEvent arg0) {
<span class="nc" id="L123">				lblPieceAvailableValue.setText(((Planet) listPlanets.getSelectedValue()).planetPieceDetected());</span>
<span class="nc" id="L124">				ImageIcon imageIcon = new ImageIcon(</span>
<span class="nc" id="L125">						StartingPlanetWindow.class.getResource(((Planet)listPlanets.getSelectedValue()).getImage()));</span>
<span class="nc" id="L126">				Image image = imageIcon.getImage();</span>
<span class="nc" id="L127">				Image newimg = image.getScaledInstance(-1, 325, java.awt.Image.SCALE_FAST);</span>
<span class="nc" id="L128">				imageIcon = new ImageIcon(newimg);</span>
<span class="nc" id="L129">				lblPlanetImage.setIcon(imageIcon);</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">				if ((Planet) listPlanets.getSelectedValue() == game.getCrew().getCurrentLocation()) {</span>
<span class="nc" id="L131">					btnPilot.setEnabled(false);</span>
<span class="nc" id="L132">					btnPilot.setToolTipText(</span>
<span class="nc" id="L133">							&quot;The planet must be different to current planet.&quot;);</span>
<span class="nc" id="L134">				} else {</span>
<span class="nc" id="L135">					btnPilot.setEnabled(true);</span>
<span class="nc" id="L136">					btnPilot.setToolTipText(null);</span>
				}
<span class="nc" id="L138">			}</span>
		});
		// Action listener to check if the conditions meet for piloting to another
		// planet
		// Action listener when player clicks the pilot button
<span class="nc" id="L143">		btnPilot.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {
<span class="nc" id="L145">				String message = pilot1.pilot((Planet) listPlanets.getSelectedValue(), pilot2, game.getCrew());</span>
<span class="nc" id="L146">				finishedWindow();</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">				if (game.gameOver()) {</span>
<span class="nc" id="L148">					game.launchGameOverWindow();</span>
<span class="nc" id="L149">				}  else {</span>
<span class="nc" id="L150">					game.launchMainWindow();</span>
				}
<span class="nc bnc" id="L152" title="All 2 branches missed.">				if (!(message == null)) {</span>
<span class="nc" id="L153">					JOptionPane.showMessageDialog(frame, message);</span>
				}

<span class="nc" id="L156">			}</span>
		});
<span class="nc" id="L158">		listPlanets.setBackground(UIManager.getColor(&quot;Menu.background&quot;));</span>
<span class="nc" id="L159">		listPlanets.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 20));</span>
<span class="nc" id="L160">		listPlanets.setBounds(34, 58, 256, 327);</span>
<span class="nc" id="L161">		panelSelectPlanet.add(listPlanets);</span>

<span class="nc" id="L163">		JLabel lblSelectPlanet = new JLabel(&quot;Select Planet:&quot;);</span>
<span class="nc" id="L164">		lblSelectPlanet.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 20));</span>
<span class="nc" id="L165">		lblSelectPlanet.setBounds(34, 13, 279, 32);</span>
<span class="nc" id="L166">		panelSelectPlanet.add(lblSelectPlanet);</span>
		
<span class="nc" id="L168">		JSeparator separatorPanelTop = new JSeparator();</span>
<span class="nc" id="L169">		separatorPanelTop.setBounds(12, 53, 301, 2);</span>
<span class="nc" id="L170">		panelSelectPlanet.add(separatorPanelTop);</span>

<span class="nc" id="L172">		JButton btnReturn = new JButton(&quot;Do something else!&quot;);</span>
<span class="nc" id="L173">		btnReturn.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {
<span class="nc" id="L175">				finishedWindow();</span>
<span class="nc" id="L176">				game.launchCrewMemberWindow();</span>
<span class="nc" id="L177">			}</span>
		});
<span class="nc" id="L179">		btnReturn.setFont(new Font(&quot;Dialog&quot;, Font.PLAIN, 16));</span>
<span class="nc" id="L180">		btnReturn.setBounds(50, 515, 218, 25);</span>
<span class="nc" id="L181">		frame.getContentPane().add(btnReturn);</span>
		
<span class="nc" id="L183">		JLabel lblTitle = new JLabel(&quot;Explore a New World!&quot;);</span>
<span class="nc" id="L184">		lblTitle.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L185">		lblTitle.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 30));</span>
<span class="nc" id="L186">		lblTitle.setBounds(0, 0, 795, 60);</span>
<span class="nc" id="L187">		frame.getContentPane().add(lblTitle);</span>
		
<span class="nc" id="L189">		JSeparator separatorTop = new JSeparator();</span>
<span class="nc" id="L190">		separatorTop.setBounds(50, 62, 695, 2);</span>
<span class="nc" id="L191">		frame.getContentPane().add(separatorTop);</span>
		
		
		
<span class="nc" id="L195">		frame.getContentPane().add(lblPlanetImage);</span>
<span class="nc" id="L196">		ImageIcon imageIcon = new ImageIcon(</span>
<span class="nc" id="L197">				StartingPlanetWindow.class.getResource(((Planet)listPlanets.getSelectedValue()).getImage()));</span>
<span class="nc" id="L198">		Image image = imageIcon.getImage();</span>
<span class="nc" id="L199">		Image newimg = image.getScaledInstance(-1, 325, java.awt.Image.SCALE_FAST);</span>
<span class="nc" id="L200">		imageIcon = new ImageIcon(newimg);</span>
<span class="nc" id="L201">		lblPlanetImage.setIcon(imageIcon);</span>
		
<span class="nc" id="L203">		JSeparator separatorBottom = new JSeparator();</span>
<span class="nc" id="L204">		separatorBottom.setBounds(50, 503, 695, 2);</span>
<span class="nc" id="L205">		frame.getContentPane().add(separatorBottom);</span>

<span class="nc" id="L207">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span>space-explorer (23/05/2019 9:13:26 PM)</div></body></html>